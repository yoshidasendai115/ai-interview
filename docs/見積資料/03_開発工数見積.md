# 3. 開発工数見積

## 3.1 見積サマリー

| 項目 | 数値 |
|------|------|
| **総開発期間** | 16週間（約4ヶ月） |
| **総工数** | 17人月（340人日） |

### 開発スケジュール（ガントチャート）

![開発スケジュール ガントチャート](./開発スケジュール_ガントチャート.png)

### フェーズ別期間サマリー

| フェーズ | 期間 | 開始 | 終了 | 主要成果物 |
|---------|------|------|------|-----------|
| **Phase 1** | 4週間 | Week 1 | Week 4 | 基盤構築完了、ユーザー向け7画面、基本API |
| **Phase 2** | 5週間 | Week 5 | Week 9 | HeyGenアバター統合、音声認識、面接フロー、学習計画機能、顔分析機能 |
| **Phase 3** | 4週間 | Week 10 | Week 13 | AI評価機能（二重評価）、管理者画面8画面、mintoku連携 |
| **Phase 4** | 3週間 | Week 14 | Week 16 | セキュリティ・負荷テスト、本番リリース |

---

## 3.2 開発規模

### 3.2.1 画面数

| カテゴリ | 画面数 | 備考 |
|---------|--------|------|
| 一般ユーザー向け（モバイル） | 7画面 | SSOログイン、ホーム、練習モード選択、面接練習（チャレンジ選択含む）、フィードバック、学習進捗、設定 |
| 管理者向け | 8画面 | ログイン、ダッシュボード、面接結果一覧、結果詳細、質問管理、質問編集、ユーザー一覧、ユーザー詳細分析 |
| **合計** | **15画面** | |

### 3.2.2 APIエンドポイント数

| カテゴリ | エンドポイント数 | 備考 |
|---------|-----------------|------|
| 認証API | 3 | SSO callback、refresh、logout |
| 面接セッションAPI | 5 | create、get、answers、complete、history |
| 評価API | 3 | status、get、summary |
| 質問API | 4 | questions、scripts一覧、scripts詳細、learning-plan |
| 顔分析API | 1 | face/analyze（感情認識・緊張度算出） |
| 管理者向けAPI | 9 | login、questions CRUD、users、sessions、statistics |
| 外部連携API | 2 | mintoku結果送信、Webhook受信 |
| **合計** | **27エンドポイント** | |

### 3.2.3 データベーステーブル数

| カテゴリ | テーブル数 | テーブル名 |
|---------|-----------|----------|
| ユーザー・学習管理 | 4 | users, user_preferred_industries, learning_plans, learning_steps |
| セッション管理 | 2 | interview_sessions, session_answers |
| 評価関連 | 4 | evaluations, evaluation_details, aptitude_evaluations, weak_points |
| マスタデータ | 4 | question_categories, industries, question_bank, scenario_templates |
| 同期管理 | 1 | mintoku_sync_queue |
| **合計** | **15テーブル** | |

### 3.2.4 外部サービス連携

| サービス | 連携内容 | 複雑度 |
|---------|---------|--------|
| HeyGen Streaming Avatar | アバター表示、リップシンク発話、JLPTレベル別話速 | 高 |
| Google Cloud STT | 音声認識（リアルタイム文字起こし）、WebSocketストリーミング | 高 |
| OpenAI GPT-4o | 日本語能力評価（4カテゴリ）、採用適性評価（5軸）、苦手分析 | 高 |
| DeepFace | 顔分析（感情認識・緊張度算出）、Base64画像をリアルタイム分析 | 中 |
| MediaPipe Face Mesh | 顔の向き検出（カメラ注視判定）、Euler角算出 | 中 |
| mintoku work | SSO認証、評価結果送信、Webhook受信（業界変更通知） | 中 |

---

## 3.3 フェーズ別工数詳細

### Phase 1: 基盤構築（4週間 / 84人日）

| タスク | 工数（人日） | 担当ロール |
|--------|------------|-----------|
| **インフラ・環境構築** | | |
| 開発環境Docker化 | 1 | インフラ |
| AWSリソース構築（EC2, RDS, S3, ElastiCache） | 3 | インフラ |
| CI/CDパイプライン構築（GitHub Actions） | 2 | インフラ |
| PostgreSQLスキーマ作成（15テーブル） | 4 | バックエンド |
| **小計** | **10** | |
| **認証基盤** | | |
| mintoku work SSO連携（OAuth 2.0 / OIDC） | 4 | バックエンド |
| JWT認証実装（アクセス・リフレッシュトークン） | 2 | バックエンド |
| セキュリティ設定（HTTPS、CORS、CSP） | 2 | バックエンド |
| **小計** | **8** | |
| **バックエンドAPI** | | |
| FastAPIプロジェクト初期設定 | 1 | バックエンド |
| 認証API（3エンドポイント） | 4 | バックエンド |
| セッションAPI（5エンドポイント） | 5 | バックエンド |
| 質問API（4エンドポイント） | 3 | バックエンド |
| **小計** | **13** | |
| **フロントエンド（ユーザー向け7画面）** | | |
| Next.js プロジェクト初期設定 | 2 | フロントエンド |
| SSOログイン画面（フォールバック用） | 2 | フロントエンド |
| ホーム画面（学習計画進捗カード含む） | 4 | フロントエンド |
| 練習モード選択画面 | 3 | フロントエンド |
| 面接練習画面（テキストベース版） | 4 | フロントエンド |
| フィードバック画面（評価処理中UI含む） | 4 | フロントエンド |
| 学習進捗画面（グラフ・苦手項目） | 4 | フロントエンド |
| 設定画面（多言語対応13言語） | 2 | フロントエンド |
| 共通コンポーネント（ナビ、レスポンシブ） | 2 | フロントエンド |
| **小計** | **27** | |
| **テスト（Phase 1）** | | |
| ユニットテスト（バックエンド） | 3 | QA |
| ユニットテスト（フロントエンド） | 3 | QA |
| **小計** | **6** | |
| **PM / PL 管理** | | |
| プロジェクト管理・顧客折衝 | 10 | PM |
| 技術リード・進捗管理 | 10 | PL |
| **小計** | **20** | |
| **Phase 1 合計** | **84人日** | |

---

### Phase 2: HeyGenアバター・音声認識・学習計画・顔分析統合（5週間 / 111人日）

| タスク | 工数（人日） | 担当ロール |
|--------|------------|-----------|
| **HeyGen Streaming Avatar統合** | | |
| HeyGen SDK導入・初期設定 | 3 | フロントエンド |
| WebRTCセッション管理 | 4 | フロントエンド |
| アバター発話制御（TaskType.REPEAT） | 3 | フロントエンド |
| JLPTレベル別話速設定（N1:1.0〜N5:0.5） | 2 | フロントエンド |
| 発話完了イベントハンドリング | 2 | フロントエンド |
| フォールバック処理（テキストモード切替） | 2 | フロントエンド |
| **小計** | **16** | |
| **Google Cloud STT統合** | | |
| Google Cloud STT設定・認証 | 2 | バックエンド |
| WebSocket音声ストリーミング | 4 | バックエンド |
| リアルタイム文字起こし表示 | 3 | フロントエンド |
| 無音検出・自動停止（5秒） | 2 | バックエンド |
| テキスト入力フォールバック | 2 | フロントエンド |
| **小計** | **13** | |
| **面接フロー制御** | | |
| 質問→回答ループ実装 | 4 | フロントエンド |
| スキップ機能 | 2 | フロントエンド |
| セッション状態管理（6状態遷移） | 2 | フロントエンド |
| 接続ステータス表示 | 2 | フロントエンド |
| **小計** | **10** | |
| **学習計画機能** | | |
| 学習計画自動生成ロジック | 3 | バックエンド |
| 学習ステップ進捗管理 | 3 | バックエンド |
| 練習モード切替（学習計画/自由練習） | 3 | フロントエンド |
| チャレンジ機能（上位レベル挑戦） | 3 | フロントエンド |
| ウォームアップモード（長期離脱者向け） | 2 | バックエンド |
| 業界変更時の学習計画更新 | 3 | バックエンド |
| **小計** | **17** | |
| **エラーハンドリング** | | |
| アバター接続失敗時リトライ・フォールバック | 3 | フロントエンド |
| マイク許可なし時の誘導ダイアログ | 2 | フロントエンド |
| 音声認識失敗時のテキスト入力切替 | 2 | フロントエンド |
| ネットワーク切断時の再接続試行 | 3 | フロントエンド |
| セッションタイムアウト処理（60分） | 2 | バックエンド |
| **小計** | **12** | |
| **顔分析機能（DeepFace/MediaPipe）** | | |
| DeepFace導入・感情認識実装 | 4 | バックエンド |
| MediaPipe顔の向き検出実装 | 2 | バックエンド |
| 緊張度算出ロジック | 2 | バックエンド |
| インカメプレビューUI | 2 | フロントエンド |
| 緊張度フィードバックUI | 2 | フロントエンド |
| **小計** | **12** | |
| **テスト（Phase 2）** | | |
| ユニットテスト（新機能） | 4 | QA |
| 統合テスト（HeyGen + STT + 面接フロー + 顔分析） | 6 | QA |
| ブラウザ互換性テスト | 1 | QA |
| **小計** | **11** | |
| **PM / PL 管理** | | |
| プロジェクト管理・顧客折衝 | 10 | PM |
| 技術リード・進捗管理 | 10 | PL |
| **小計** | **20** | |
| **Phase 2 合計** | **111人日** | |

---

### Phase 3: 評価機能・管理者画面・外部連携（4週間 / 84人日）

| タスク | 工数（人日） | 担当ロール |
|--------|------------|-----------|
| **GPT-4o評価機能（二重評価体系）** | | |
| 評価API実装 | 3 | バックエンド |
| 日本語能力評価（語彙・文法・内容・敬語、JLPTレベル別重み付け） | 5 | バックエンド |
| 採用適性評価（適応力・コミュニケーション力・主体性・定着意向・協調性） | 4 | バックエンド |
| 統合スコア計算（日本語40%＋適性60%） | 2 | バックエンド |
| JLPTレベル乖離検出・警告生成 | 2 | バックエンド |
| 苦手項目検出・蓄積ロジック（閾値70点） | 3 | バックエンド |
| 企業向け統合評価レポート生成 | 2 | バックエンド |
| 評価結果DB保存（非同期処理） | 1 | バックエンド |
| **小計** | **22** | |
| **適応型レベル調整機能** | | |
| レベル調整ロジック（スコア別自動調整） | 2 | バックエンド |
| フィードバック画面のレベル調整ボタン表示 | 2 | フロントエンド |
| 平均スコア計算・表示 | 2 | フロントエンド |
| LocalStorageデータ復旧処理 | 1 | フロントエンド |
| **小計** | **7** | |
| **mintoku work連携** | | |
| 評価結果送信API実装 | 3 | バックエンド |
| リトライ処理（指数バックオフ、同期キュー） | 2 | バックエンド |
| Webhook受信（ユーザー情報更新） | 2 | バックエンド |
| 非ログイン時のWebhook処理（pending_industry） | 2 | バックエンド |
| **小計** | **9** | |
| **管理者向け機能（8画面）** | | |
| 管理者ログイン画面・認証 | 3 | フロントエンド |
| ダッシュボード画面（KPI・統計） | 3 | フロントエンド |
| 面接結果一覧画面（検索・フィルタ・エクスポート） | 4 | フロントエンド |
| 結果詳細画面（タブ切替：概要・履歴・質問回答・企業レポート） | 3 | フロントエンド |
| 質問管理画面（一覧・作成・編集・削除） | 3 | フロントエンド |
| ユーザー一覧画面（AI面談実施ユーザー） | 2 | フロントエンド |
| ユーザー詳細分析画面（成長曲線・苦手・履歴タブ） | 4 | フロントエンド |
| 管理者向けAPI（9エンドポイント） | 4 | バックエンド |
| **小計** | **26** | |
| **PM / PL 管理** | | |
| プロジェクト管理・顧客折衝 | 10 | PM |
| 技術リード・進捗管理 | 10 | PL |
| **小計** | **20** | |
| **Phase 3 合計** | **84人日** | |

---

### Phase 4: テスト・本番リリース準備（3週間 / 61人日）

| タスク | 工数（人日） | 担当ロール |
|--------|------------|-----------|
| **セキュリティテスト** | | |
| OWASP Top 10脆弱性チェック | 4 | セキュリティ |
| 認証・認可テスト（SSO、JWT、管理者認証） | 2 | QA |
| 入力バリデーションテスト | 2 | QA |
| Webhook署名検証テスト | 1 | QA |
| セキュリティ監査レポート作成 | 1 | セキュリティ |
| **小計** | **10** | |
| **負荷テスト** | | |
| 同時100ユーザー目標テスト | 3 | QA |
| HeyGen/STT同時接続テスト | 2 | QA |
| API応答時間測定 | 2 | QA |
| ボトルネック特定・改善 | 3 | バックエンド |
| **小計** | **10** | |
| **本番環境構築** | | |
| 本番AWSリソース構築 | 4 | インフラ |
| SSL証明書設定 | 1 | インフラ |
| CloudWatch監視設定 | 2 | インフラ |
| バックアップ設定（S3ライフサイクル90日） | 1 | インフラ |
| アラート設定 | 2 | インフラ |
| **小計** | **10** | |
| **運用準備** | | |
| 障害対応手順書 | 2 | インフラ |
| **小計** | **2** | |
| **最終テスト** | | |
| 本番環境での動作確認 | 3 | QA |
| E2Eテスト（全フロー通し） | 4 | QA |
| 最終バグ修正 | 2 | バックエンド |
| **小計** | **9** | |
| **PM / PL 管理** | | |
| プロジェクト管理・顧客折衝・運用マニュアル・リリースチェックリスト | 10 | PM |
| 技術リード・進捗管理・ドキュメント整備 | 10 | PL |
| **小計** | **20** | |
| **Phase 4 合計** | **61人日** | |

---

## 3.4 役割別工数サマリー

| ロール | Phase 1 | Phase 2 | Phase 3 | Phase 4 | 合計 |
|--------|---------|---------|---------|---------|------|
| PM | 10 | 10 | 10 | 10 | 40 |
| PL | 10 | 10 | 10 | 10 | 40 |
| インフラエンジニア | 6 | 0 | 0 | 12 | 18 |
| バックエンドエンジニア | 25 | 29 | 37 | 5 | 96 |
| フロントエンドエンジニア | 27 | 51 | 27 | 0 | 105 |
| QA/テストエンジニア | 6 | 11 | 0 | 19 | 36 |
| セキュリティエンジニア | 0 | 0 | 0 | 5 | 5 |
| **合計** | **84** | **111** | **84** | **61** | **340** |

> **注**: PM/PLは各0.5人月/月の稼働想定。セキュリティ監査は外部委託想定。

---

## 3.5 推奨体制

### 3.5.1 基本チーム構成（4〜5名＋PM/PL＋外部）

| ロール | 人数 | 担当範囲 |
|--------|------|---------|
| PM | 1名（0.5人月/月） | プロジェクト管理、顧客折衝、運用ドキュメント |
| PL | 1名（0.5人月/月） | 技術リード、進捗管理、技術ドキュメント |
| バックエンドエンジニア | 1〜2名 | API開発、DB設計、GPT-4o統合、外部連携、インフラ |
| フロントエンドエンジニア | 1〜2名 | UI実装、HeyGen統合、STT統合、状態管理 |
| QAエンジニア | 1名 | テスト設計・実行、セキュリティテスト |
| セキュリティエンジニア | 外部 | Phase 4セキュリティ監査（外部委託想定） |

### 3.5.2 スキル要件

| ロール | 必須スキル |
|--------|-----------|
| バックエンド | Python/FastAPI、PostgreSQL、AWS、OAuth 2.0/OIDC、OpenAI API |
| フロントエンド | React/Next.js/TypeScript、WebRTC、WebSocket、状態管理（Zustand等） |
| QA | 自動テスト、負荷テスト、セキュリティテスト基礎 |

---

## 3.6 工数算出の前提条件

1. **1人月 = 20人日** で計算
2. **1日 = 8時間** の稼働を前提
3. 祝日・有給等は含まない純粋な稼働日数
4. 要件変更が発生した場合は別途見積
5. 外部API（HeyGen、Google Cloud、OpenAI、mintoku work）の仕様変更リスクは考慮済み
6. テスト工数には不具合修正の工数を含む
7. 多言語対応（13言語）のUIテキスト翻訳は外部委託を想定
8. PM/PLは各0.5人月/月の稼働を前提

---

## 3.7 リスクと対策

| リスク | 影響度 | 発生確率 | 対策 |
|--------|--------|---------|------|
| HeyGen API仕様変更・障害 | 高 | 中 | テキスト表示フォールバックの設計、SDKバージョン固定と更新時回帰テスト、代替TTSの事前調査 |
| GPT-4o応答遅延・レート制限 | 中 | 中 | 非同期評価処理（30秒タイムアウト）、評価待ちUI、評価リクエストのキューイング |
| mintoku work連携仕様未確定 | 高 | 低 | モック実装で並行開発、Phase 1中にAPI仕様書ドラフト合意、仕様変更用の予備日確保 |
| 多言語翻訳品質 | 中 | 中 | ネイティブチェック体制の構築、段階的リリースによるリスク最小化。翻訳は外部委託（費用別途） |
| 負荷テスト結果による改修 | 中 | 中 | Phase 2完了時に主要フローの簡易負荷テストを実施し早期にボトルネック特定 |
| DeepFace/MediaPipe処理負荷 | 中 | 中 | フレームレート1秒間隔、同時分析数の上限設定、顔分析機能のON/OFFオプション化 |
| 顔分析精度のばらつき | 低 | 中 | 照明条件ガイダンス表示、低品質フレーム自動除外（明るさ0-255判定） |
| 外部APIランニングコスト超過 | 高 | 中 | 月次コスト上限アラート設定、HeyGenセッション時間制限（30分） |
| モバイルブラウザ互換性 | 中 | 高 | WebRTC+カメラ+WebSocket同時利用のデバイステスト、Phase 2で早期検証 |

---

## 改訂履歴

| 日付 | バージョン | 内容 |
|------|-----------|------|
| 2025-02-06 | 1.0 | 初版作成 |
