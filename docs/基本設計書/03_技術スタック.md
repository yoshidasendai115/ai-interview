# 3. 技術スタック

## 3.1 確定した技術構成

| レイヤー             | 技術                                             |
| -------------------- | ------------------------------------------------ |
| **Frontend**   | React (Vite)                                     |
| **Backend**    | FastAPI (Python)                                 |
| **Database**   | PostgreSQL (RDS)                                 |
| **ストレージ** | S3（音声/動画）                                  |
| **インフラ**   | EC2 (Amazon Linux 2023), ALB, CloudFront         |
| **キャッシュ** | ElastiCache (Redis)                              |
| **AI/API**     | OpenAI GPT-4o, Google Cloud STT, HeyGen |
| **顔分析**     | DeepFace（感情認識）, MediaPipe Face Mesh（顔の向き検出） |

## 3.2 技術選定理由

### FastAPI (Python) を選定した理由

- OpenAI、Google Cloud STT/TTSとの連携ライブラリが豊富
- 音声解析ライブラリ（librosa, pydub等）が充実
- LangChainなどのAI/MLツールが成熟
- 非同期処理に強い

### Amazon Linux 2023 を選定した理由

- AWS環境に最適化
- 長期サポート
- 軽量でパフォーマンスが良い

---

## 3.3 対応プラットフォーム

### 3.3.1 アーキテクチャ

![対応プラットフォーム アーキテクチャ](./images/アーキテクチャ_対応プラットフォーム.png)

### 3.3.2 ユーザー向け

| プラットフォーム | 対応 | 実装方式 |
|-----------------|------|----------|
| Webブラウザ（モバイル） | ○ | React（モバイル優先 375px〜） |
| Webブラウザ（PC） | ○ | React（タブレット/デスクトップ対応） |
| iOSアプリ | ○ | **WebView**（同一Webアプリを表示） |
| Androidアプリ | ○ | **WebView**（同一Webアプリを表示） |

### 3.3.3 管理者向け

| プラットフォーム | 対応 | 実装方式 |
|-----------------|------|----------|
| Webブラウザ（PC） | ○ | React（デスクトップ優先 1024px〜） |
| Webブラウザ（タブレット） | ○ | React（768px〜） |
| モバイル | ✕ | 不可 |

### 3.3.4 WebViewアプリの認証フロー

| 項目 | 内容 |
|------|------|
| シームレス遷移 | 外部システムからURLスキーム/Universal Linkで起動 |
| URL例 | `aiinterview://open?token=xxx` または `https://app.example.com/auth?token=xxx` |
| トークン保存 | WebView内のCookie/LocalStorage |
| 自動ログイン | 保存済みセッションが有効な場合、直接ホームへ |

