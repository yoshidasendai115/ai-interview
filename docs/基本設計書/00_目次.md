# AI面接練習・評価プラットフォーム 基本設計書

## 目次

### 1 プロジェクト概要

- 1.1 目的
- 1.2 主な目標
- 1.3 ターゲットユーザー

### 2 システム概要

- 2.1 システム全体図
- 2.2 主要機能

### 3 技術スタック

- 3.1 フロントエンド
- 3.2 バックエンド
- 3.3 インフラ

### 4 AWSインフラ構成

- 4.1 アーキテクチャ概要
- 4.2 ネットワーク構成
- 4.3 コンピューティング
- 4.4 データベース
- 4.5 ストレージ
- 4.6 CDN・キャッシュ

### 5 プロジェクト構成

- 5.1 リポジトリ構成
- 5.2 命名規約
- 5.3 テスト構成
- 5.4 CI/CD構成

### 6 画面設計

- 6.1 画面一覧
- 6.2 外国人ユーザー向け画面
- 6.3 管理者向け画面
- 6.4 画面遷移の説明
- 6.5 認証方式
- 6.6 対応プラットフォーム

### 7 評価ロジック

- 7.0 本設計書の位置づけ
- 7.1 評価基準
- 7.2 評価カテゴリと配点
- 7.3 スコアリング計算式
- 7.4 GPT-4o評価プロンプト
- 7.5 苦手分析の仕組み
- 7.6 評価フロー
- 7.7 採用適性評価との統合
- 7.8 関連設計書
- 7.9 JLPTレベル乖離検出
- 7.10 適応型JLPTレベル調整

### 8 開発ロードマップ

- 8.1 フェーズ概要
- 8.2 Phase 1: 基盤構築
- 8.3 Phase 2: コア機能
- 8.4 Phase 3: 品質向上
- 8.5 Phase 4: 本番準備

### 9 外部API連携

- 9.1 HeyGen Streaming Avatar
- 9.2 Google Cloud Speech-to-Text
- 9.3 OpenAI GPT-4o
- 9.4 mintoku work連携

### 10 API仕様

- 10.1 API概要
- 10.2 認証API
- 10.3 面接セッションAPI
- 10.4 評価API
- 10.5 ユーザーAPI

### 11 データベーススキーマ

- 11.1 ER図
- 11.2 テーブル定義
- 11.3 インデックス設計

### 12 面接フロー制御

- 12.1 面接セッション全体フロー
- 12.2 HeyGen Streaming Avatar統合
- 12.3 JLPTレベル別質問取得（API連携）
- 12.4 質問・回答ループ
- 12.5 Google Cloud STT統合
- 12.6 セッション完了処理
- 12.7 エラーハンドリング
- 12.8 状態管理
- 12.9 適応型JLPTレベル調整フロー

### 13 面接シナリオ設計

- 13.1 概要
- 13.2 外国人採用で求められる人材像
- 13.3 面接シナリオ構造
- 13.4 質問バンク設計
- 13.5 評価基準（採用適性評価）
- 13.6 シナリオテンプレート
- 13.7 HeyGen統合
- 13.8 データベーステーブル
- 13.9 参考資料
- 13.10 日本語能力評価との統合

### 14 セキュリティ設計

- 14.1 認証・認可
- 14.2 データ保護
- 14.3 通信セキュリティ
- 14.4 WAF設計
- 14.5 監査ログ

### 15 監視設計

- 15.1 監視概要
- 15.2 メトリクス監視
- 15.3 ログ監視
- 15.4 アラート設計
- 15.5 ダッシュボード

---

## 改訂履歴

| 日付       | バージョン | 内容     |
| ---------- | ---------- | -------- |
| 2025-01-30 | 1.0        | 初版作成 |
| 2025-01-30 | 1.1        | mintoku work連携を追加 |
| 2025-01-30 | 1.2        | mintoku work連携図をDrawIO化、対象国リスト削除 |
| 2025-01-31 | 1.3        | アバター技術をHeyGenに決定（PoC検証結果に基づく） |
| 2025-01-31 | 1.4        | 面接予約機能・日程管理機能を削除（スコープ外） |
| 2025-02-01 | 1.5        | 設計書詳細化: API仕様、DB設計、評価ロジック詳細、面接フロー、セキュリティ、開発ロードマップ詳細を追加。管理者機能はmintoku work側で提供する旨を明記 |
| 2025-02-01 | 1.6        | 章別ファイルに分割、基本設計書にリネーム |
| 2025-02-01 | 1.7        | 監視設計（15章）を追加 |
| 2025-02-01 | 1.8        | WAF設計（14.4節）を追加 |
| 2026-02-01 | 1.9        | 面接シナリオ設計（13章）を追加。質問バンク50問、評価基準5軸、業界別テンプレートを定義 |
| 2026-02-01 | 2.0        | 画面設計・面接シナリオ設計を基本設計書に統合、章構成を再編 |
| 2026-02-01 | 2.1        | 目次フォーマットを章節形式に変更 |
| 2026-02-02 | 2.2        | 目次と実ファイルの節番号を同期、統合スコア計算式を正規化（0-100点範囲を正確に実現）、重複する計算式を7.7節に集約、プロジェクト構成に命名規約・テスト構成・CI/CDを追加、エラーハンドリング詳細を追加 |
| 2026-02-02 | 2.3        | 管理者向け機能を本システムで提供に変更（mintoku workとの連携はSSO認証と評価結果送信のみに限定） |
| 2026-02-02 | 2.4        | レビュー指摘対応: 01/02章の管理者機能記述修正、04章コスト表フォーマット修正、10章に管理者APIとセッション管理追加、11章にデータ整合性ルール追加、14章にSSRF対策・依存関係管理追加、15章にビジネスメトリクス監視追加 |
| 2026-02-03 | 2.5        | 適応型JLPTレベル調整機能を追加（7.10節、12.9節）: スコア別レベル自動調整、チャレンジ枠（1日3回制限）、平均スコア方式の最終評価 |
